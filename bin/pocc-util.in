#!/usr/bin/perl -w
## pocc-bin for pocc in /Users/pouchet
## 
## Made by Louis-Noel Pouchet
## Contact: <louis-noel.pouchet@inria.fr>
## 
## Started on  Tue Apr 14 17:43:47 2009 Louis-Noel Pouchet
## Last update Mon Apr 27 05:21:07 2009 Louis-Noel Pouchet
##

use Switch;

## Some global variables.
$BASEDIR = "@abs_top_srcdir@";

## Include command scripts.
use "$BASEDIR/bin/pocc-checkout";
use "$BASEDIR/bin/pocc-make";

sub print_help
{
    print "This is the help of pocc\n";
}


# args: command line options
sub parse_args
{
    my $i;
    my @args = @_;
    for($i = 0; $i <= $#args; $i++) {
	switch ($args[$i]) {
	    case "help" { print_help; exit 1; }
	    case "checkout" {  
		if ($i < $#args) {
		    checkout($BASEDIR, $args[$i + 1]);
		}
		else {
		    checkout($BASEDIR, "base");
		}
		$i = $#args;
	    }
	    case "make" { make_all($BASEDIR); }
	    else { print "Unknown argument: $args[$i]\n"; }
	}
    }
}


# args:
sub main
{
    parse_args (@_);
}


main(@ARGV);
